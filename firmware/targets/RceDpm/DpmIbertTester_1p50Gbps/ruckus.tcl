# Load RUCKUS environment and library
source -quiet $::env(RUCKUS_DIR)/vivado_proc.tcl

# Load common and sub-module ruckus.tcl files
loadRuckusTcl $::env(TOP_DIR)/submodules/surf
loadRuckusTcl $::env(TOP_DIR)/submodules/rce-gen3-fw-lib/DpmCore

# Load local Source Code and constraints
loadSource -dir       "$::DIR_PATH/hdl"
loadConstraints -dir  "$::DIR_PATH/hdl"

if { [llength [get_ips ibert_7series_gtx_0]] == 0 } {
   create_ip -name ibert_7series_gtx -vendor xilinx.com -library ip -version 3.0 -module_name ibert_7series_gtx_0
   set_property -dict [list CONFIG.C_PROTOCOL_USE_QUAD_PLL_1 {false} CONFIG.C_PROTOCOL_DATAWIDTH_1 {32} CONFIG.C_PROTOCOL_MAXLINERATE_1 {1.5} CONFIG.C_PROTOCOL_GT_COUNT_1 {3} CONFIG.C_PROTOCOL_RXREFCLK_FREQUENCY_1 {250.000} CONFIG.C_PROTOCOL_QUAD1 {Custom_1_/_1.5_Gbps} CONFIG.C_PROTOCOL_QUAD2 {Custom_1_/_1.5_Gbps} CONFIG.C_PROTOCOL_QUAD3 {Custom_1_/_1.5_Gbps} CONFIG.C_REFCLK_SOURCE_QUAD_1 {MGTREFCLK0_111} CONFIG.C_REFCLK_SOURCE_QUAD_3 {MGTREFCLK0_111} CONFIG.C_SYSCLOCK_SOURCE_INT {QUAD111_0} CONFIG.C_PROTOCOL_1 {Custom_1} CONFIG.C_PROTOCOL_2 {Custom_2} CONFIG.C_PROTOCOL_DATAWIDTH_2 {32} CONFIG.C_PROTOCOL_3 {Custom_3} CONFIG.C_PROTOCOL_DATAWIDTH_3 {32} CONFIG.C_PROTOCOL_GT_COUNT_2 {0} CONFIG.C_PROTOCOL_GT_COUNT_3 {0} CONFIG.C_PROTOCOL_QUAD0 {None} CONFIG.C_PROTOCOL_QUAD1 {Custom_1_/_1.5_Gbps} CONFIG.C_PROTOCOL_QUAD2 {Custom_1_/_1.5_Gbps} CONFIG.C_PROTOCOL_QUAD3 {Custom_1_/_1.5_Gbps} CONFIG.C_PROTOCOL_QUAD4 {None} CONFIG.C_PROTOCOL_QUAD5 {None} CONFIG.C_PROTOCOL_QUAD6 {None} CONFIG.C_PROTOCOL_QUAD7 {None} CONFIG.C_PROTOCOL_QUAD8 {None} CONFIG.C_PROTOCOL_QUAD9 {None} CONFIG.C_PROTOCOL_QUAD10 {None} CONFIG.C_PROTOCOL_QUAD11 {None} CONFIG.C_PROTOCOL_QUAD12 {None} CONFIG.C_PROTOCOL_QUAD13 {None} CONFIG.C_PROTOCOL_QUAD14 {None} CONFIG.C_PROTOCOL_QUAD15 {None} CONFIG.C_REFCLK_SOURCE_QUAD_0 {None} CONFIG.C_REFCLK_SOURCE_QUAD_2 {MGTREFCLK0_111} CONFIG.C_REFCLK_SOURCE_QUAD_4 {None} CONFIG.C_REFCLK_SOURCE_QUAD_5 {None} CONFIG.C_REFCLK_SOURCE_QUAD_6 {None} CONFIG.C_REFCLK_SOURCE_QUAD_7 {None} CONFIG.C_REFCLK_SOURCE_QUAD_8 {None} CONFIG.C_REFCLK_SOURCE_QUAD_9 {None} CONFIG.C_REFCLK_SOURCE_QUAD_10 {None} CONFIG.C_REFCLK_SOURCE_QUAD_11 {None} CONFIG.C_REFCLK_SOURCE_QUAD_12 {None} CONFIG.C_REFCLK_SOURCE_QUAD_13 {None} CONFIG.C_REFCLK_SOURCE_QUAD_14 {None} CONFIG.C_REFCLK_SOURCE_QUAD_15 {None} CONFIG.C_CHANNEL_QUAD_0 {Channel_0} CONFIG.C_CHANNEL_QUAD_1 {Channel_0} CONFIG.C_CHANNEL_QUAD_2 {Channel_0} CONFIG.C_CHANNEL_QUAD_3 {Channel_0} CONFIG.C_CHANNEL_QUAD_4 {Channel_0} CONFIG.C_CHANNEL_QUAD_5 {Channel_0} CONFIG.C_CHANNEL_QUAD_6 {Channel_0} CONFIG.C_CHANNEL_QUAD_7 {Channel_0} CONFIG.C_CHANNEL_QUAD_8 {Channel_0} CONFIG.C_CHANNEL_QUAD_9 {Channel_0} CONFIG.C_CHANNEL_QUAD_10 {Channel_0} CONFIG.C_CHANNEL_QUAD_11 {Channel_0} CONFIG.C_CHANNEL_QUAD_12 {Channel_0} CONFIG.C_CHANNEL_QUAD_13 {Channel_0} CONFIG.C_CHANNEL_QUAD_14 {Channel_0} CONFIG.C_CHANNEL_QUAD_15 {Channel_0} CONFIG.C_RXOUTCLK_GT_LOCATION {QUAD_110} CONFIG.C_RXOUTCLK_PIN_STD {DIFF_SSTL15} CONFIG.C_RXOUTCLK_FREQUENCY {46.875} CONFIG.C_SYSCLK_MODE_EXTERNAL {0} CONFIG.C_SYSCLK_IO_PIN_STD {DIFF_SSTL15} CONFIG.C_SYSCLK_FREQUENCY {250.000} CONFIG.C_SYSCLK_IO_PIN_LOC_N {UNASSIGNED} CONFIG.C_SYSCLK_IO_PIN_LOC_P {UNASSIGNED}] [get_ips ibert_7series_gtx_0]
}
